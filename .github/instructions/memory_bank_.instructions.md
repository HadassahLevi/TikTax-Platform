---
applyTo: '**'
---
# TIK-TAX MEMORY BANK STRUCTURE # Complete GitHub Copilot Memory System # ======================================== --- applyTo: '**' --- # GitHub Copilot's Memory Bank for Tik-Tax I am GitHub Copilot, an expert software engineer with a unique characteristic: my memory resets completely between sessions. This isn't a limitation - it's what drives me to maintain perfect documentation. After each reset, I rely ENTIRELY on my Memory Bank to understand the Tik-Tax project and continue work effectively. I MUST read ALL memory bank files at the start of EVERY task - this is not optional. ## Memory Bank Structure The Memory Bank consists of core files and optional context files, all in Markdown format. Files build upon each other in a clear hierarchy: ``` memory-bank/ ‚îú‚îÄ‚îÄ 1-projectbrief.md         (Foundation - What we're building) ‚îú‚îÄ‚îÄ 2-productContext.md       (Why & How - Product vision) ‚îú‚îÄ‚îÄ 3-systemPatterns.md       (Architecture - How it's built) ‚îú‚îÄ‚îÄ 4-techContext.md          (Technologies - What we use) ‚îú‚îÄ‚îÄ 5-activeContext.md        (Now - Current focus) ‚îú‚îÄ‚îÄ 6-progress.md             (Status - What's done/todo) ‚îî‚îÄ‚îÄ extras/     ‚îú‚îÄ‚îÄ hebrewTexts.md        (Hebrew UI translations)     ‚îú‚îÄ‚îÄ apiEndpoints.md       (API documentation)     ‚îú‚îÄ‚îÄ securityRules.md      (Security requirements)     ‚îî‚îÄ‚îÄ designSystem.md       (Colors, spacing, typography) ``` ### File Dependency Flow: ``` projectbrief.md (Foundation)     ‚Üì     ‚îú‚îÄ‚îÄ‚Üí productContext.md (User experience)     ‚îú‚îÄ‚îÄ‚Üí systemPatterns.md (Architecture)     ‚îî‚îÄ‚îÄ‚Üí techContext.md (Technologies)          ‚Üì          ‚îî‚îÄ‚îÄ‚Üí activeContext.md (Current work)               ‚Üì               ‚îî‚îÄ‚îÄ‚Üí progress.md (Status tracking) ``` --- ## CORE FILES (REQUIRED - READ FIRST) ### 1. projectbrief.md **Purpose:** Foundation document - shapes all other files **Contents:** - Project name: Tik-Tax - Project type: B2C SaaS Web Application - Target market: Israeli small businesses - Core problem: Manual expense management is time-consuming and error-prone - Core solution: AI-powered receipt digitization with secure archiving - MVP scope: Receipt upload ‚Üí OCR extraction ‚Üí Review ‚Üí Archive ‚Üí Export - Out of scope: Income tracking, accountant portal (Phase 3) - Success criteria: 100 paying users in 3 months, 80% processing accuracy **When to update:** Never (unless project fundamentally changes) --- ### 2. productContext.md **Purpose:** Why this exists and how users experience it **Contents:** - **Problem Statement:**   - Small business owners drown in paper receipts   - 7-year legal storage requirement in Israel   - Manual data entry to accountants   - Missed tax deductions due to disorganization - **User Personas:**   - Primary: David (28-42, freelance designer, tech-savvy)   - Secondary: Rachel (35-55, small shop owner, moderate tech) - **User Journey:**   1. Take photo of receipt (10 seconds)   2. AI extracts data automatically (15 seconds)   3. User reviews and confirms (30 seconds)   4. Receipt archived with digital signature   5. Export to Excel for accountant (one click) - **Key Features:**   - Smart receipt capture (camera/gallery)   - Hebrew OCR with 95%+ accuracy   - Intelligent categorization (13 categories)   - Secure cloud storage   - Accountant-ready Excel export - **Design Principles:**   - Mobile-first (most receipts captured on phone)   - Hebrew primary language (RTL layout)   - Simplicity over features   - Trust through transparency (show confidence scores) **When to update:** When user needs change or new features planned --- ### 3. systemPatterns.md **Purpose:** How the system is architected **Contents:** - **Architecture Overview:**   ```   [Mobile Browser] ‚Üí [React SPA] ‚Üí [REST API] ‚Üí [PostgreSQL]                           ‚Üì                     [Google Vision API]                     [AWS S3 Storage]                     [Israeli CA Signing]   ``` - **Core Components:**   1. **Receipt Upload Flow:**      - CameraCapture ‚Üí ImageUpload ‚Üí Validation ‚Üí Compression      2. **OCR Processing Pipeline:**      - Image upload ‚Üí Google Vision API ‚Üí Data extraction ‚Üí Confidence scoring      3. **Data Review & Storage:**      - Review screen ‚Üí Manual corrections ‚Üí Digital signature ‚Üí S3 upload      4. **Archive & Search:**      - Filter/sort engine ‚Üí Paginated results ‚Üí Detail modals      5. **Export System:**      - Date range + filters ‚Üí Excel generation ‚Üí Download - **State Management Pattern:**   - Zustand stores for global state   - React Query for server state (future)   - Local component state for UI   - **CRITICAL:** Auth tokens in memory ONLY (never localStorage) - **Data Flow:**   ```   User Action ‚Üí Component ‚Üí Service Layer ‚Üí API Client ‚Üí Backend                                ‚Üì                          Zustand Store Update                                ‚Üì                          Component Re-render   ``` - **Security Architecture:**   - JWT tokens (access + refresh)   - Token refresh on 401   - All API calls authenticated   - Input validation (client + server)   - XSS prevention (DOMPurify) - **Error Handling Pattern:**   - API errors ‚Üí handleAPIError ‚Üí Hebrew messages ‚Üí Toast   - Component errors ‚Üí ErrorBoundary ‚Üí Fallback UI   - Network errors ‚Üí Retry mechanism **When to update:** When architecture changes or new patterns emerge --- ### 4. techContext.md **Purpose:** Technologies and tools used **Contents:** - **Core Stack:**   - **Frontend:** React 18.2 + TypeScript 5.2   - **Build Tool:** Vite 5.0   - **Styling:** Tailwind CSS 3.3 (with RTL support)   - **State:** Zustand 4.4   - **Routing:** React Router v6   - **Forms:** React Hook Form 7.49   - **HTTP:** Axios 1.6   - **Icons:** lucide-react 0.294   - **Charts:** recharts 2.10   - **Animations:** framer-motion 10.16   - **i18n:** react-i18next 14.0 - **Development Tools:**   - **Linting:** ESLint + TypeScript ESLint   - **Formatting:** Prettier   - **Testing:** Vitest + React Testing Library   - **Type Checking:** TypeScript strict mode - **External Services:**   - **OCR:** Google Cloud Vision API   - **Storage:** AWS S3   - **Payments:** Stripe   - **Digital Signature:** Israeli Certificate Authority (e-Sign) - **Browser Support:**   - Chrome 90+ (primary)   - Safari 14+ (iOS support)   - Firefox 88+   - Edge 90+ - **Development Environment:**   - Node.js 18+   - npm package manager   - VS Code recommended   - GitHub Copilot enabled - **File Structure Convention:**   ```   /src     /components       /ui          ‚Üí Reusable components (Button, Input, Modal)       /layout      ‚Üí Layout components (Header, BottomNav)       /receipt     ‚Üí Receipt-specific (CameraCapture, ReceiptCard)       /category    ‚Üí Category management       /loading     ‚Üí Loading states     /pages         ‚Üí Route pages (Dashboard, Archive, Profile)     /services      ‚Üí API layer (auth.service, receipt.service)     /hooks         ‚Üí Custom hooks (useAuth, useDebounce)     /stores        ‚Üí Zustand stores (auth.store, filter.store)     /utils         ‚Üí Utilities (formatters, validators, helpers)     /types         ‚Üí TypeScript definitions     /config        ‚Üí Configuration (axios, env)     /constants     ‚Üí Constants (categories, colors)     /i18n          ‚Üí Translations (he.json, en.json)   ``` - **Naming Conventions:**   - Components: PascalCase (Button.tsx)   - Hooks: camelCase with "use" prefix (useAuth.ts)   - Services: camelCase with ".service" suffix (auth.service.ts)   - Types: PascalCase with "Props" or "Type" suffix   - Files: Same as export name - **Import Alias:**   ```typescript   @/components ‚Üí /src/components   @/hooks ‚Üí /src/hooks   @/utils ‚Üí /src/utils   // etc.   ``` **When to update:** When dependencies change or new tools added --- ### 5. activeContext.md **Purpose:** Current focus and recent changes **Contents Template:** ```markdown # Active Context Last Updated: [Date] ## Current Sprint Focus **Goal:** [What we're working on this week] **Priority:** [High/Medium/Low] ## Active Tasks 1. [ ] Task 1 - Description 2. [ ] Task 2 - Description 3. [x] Task 3 - Completed ## Recent Changes (Last 7 Days) - [Date] - Implemented Button component with all variants - [Date] - Set up Zustand auth store - [Date] - Created receipt upload flow ## Current Decisions & Context ### Decision: [Topic] **Context:** Why we're considering this **Options:** A, B, C **Chosen:** Option B **Reasoning:** Because... ## Active Patterns & Preferences - Always use TypeScript strict mode - Never use localStorage for sensitive data - Hebrew text must always be in RTL - All components need loading states - [Add learnings as they emerge] ## Blockers & Questions 1. **Blocker:** Waiting for backend API endpoint /auth/refresh 2. **Question:** Should we use react-query for server state? ## Next Steps (Immediate) 1. Complete login page 2. Set up protected routes 3. Create dashboard layout ## Important Notes - Google Vision API key is in .env (not committed) - Test user: test@tiktax.co.il / password123 - Staging URL: https://staging.tiktax.co.il ``` **When to update:**  - Start of each work session - After significant progress - When context shifts - When user says "update memory bank" --- ### 6. progress.md **Purpose:** Track what's done and what's left **Contents Template:** ```markdown # Tik-Tax Progress Tracker Last Updated: [Date] ## Project Status: üü° In Development (MVP) - Started: [Date] - Target MVP: [Date] - Current Phase: Foundation Setup ## Completed ‚úÖ ### Setup & Configuration - [x] Project initialized with Vite + React + TypeScript - [x] Tailwind CSS configured with RTL support - [x] ESLint and Prettier configured - [x] Path aliases set up (@/ imports) - [x] Environment variables structure created ### UI Components (7/20) - [x] Button component (all variants: primary, secondary, ghost, danger) - [x] Input component (with validation states) - [x] Card component - [x] Modal component - [ ] Toast notification system - [ ] DatePicker component - [ ] Dropdown/Select component - [... remaining components] ### Authentication (2/5) - [x] Auth service with API calls - [x] Zustand auth store - [ ] Login page - [ ] Signup page (3 steps) - [ ] Protected route wrapper ### Receipt Management (0/8) - [ ] Camera capture component - [ ] Image upload component - [ ] OCR integration - [ ] Receipt review page - [ ] Receipt detail modal - [ ] Receipt card component - [ ] Archive page with filters - [ ] Export modal ### Dashboard (0/4) - [ ] Monthly summary card - [ ] Category breakdown chart - [ ] Recent receipts list - [ ] Quick actions ### Other Features (0/10) - [ ] Profile page - [ ] Settings - [ ] Search functionality - [ ] Filters - [ ] Pagination - [... etc] ## In Progress üü° - **Button Component** - 90% (needs accessibility audit) - **Auth Store** - 80% (needs token refresh logic) ## Known Issues üî¥ 1. **Issue:** TypeScript path aliases not working in tests    - **Impact:** Medium    - **Workaround:** Use relative imports in test files    - **Plan:** Configure Vitest to recognize aliases 2. **Issue:** RTL layout breaks on Safari iOS    - **Impact:** High (primary platform)    - **Status:** Investigating    - **Next Step:** Test with different Tailwind RTL approaches ## Technical Debt - [ ] Add error boundaries to all major sections - [ ] Implement proper loading skeletons - [ ] Add unit tests for utilities - [ ] Set up CI/CD pipeline ## Performance Metrics - Current bundle size: ~320KB (gzipped) - Target: <500KB - Lighthouse score: Not yet measured - Target: >90 on all metrics ## Evolution of Decisions ### Decision History **[Date] - Auth Token Storage** - **Initial Approach:** localStorage - **Problem:** Security vulnerability - **New Approach:** Memory-only (Zustand) - **Result:** More secure, requires token refresh logic **[Date] - Component Library Choice** - **Considered:** Material-UI, Ant Design, Custom - **Chosen:** Custom with Tailwind - **Reason:** Full control, smaller bundle, better RTL support ## Next Milestones - [ ] **Week 1:** Complete UI foundation (all base components) - [ ] **Week 2:** Authentication flow working end-to-end - [ ] **Week 3:** Receipt upload and OCR integration - [ ] **Week 4:** Archive and export functionality - [ ] **Week 5-6:** Polish and testing ``` **When to update:**  - After completing tasks - When discovering issues - When making architectural decisions - Weekly review --- ## EXTRA FILES (OPTIONAL CONTEXT) ### extras/hebrewTexts.md **Quick reference for Hebrew UI text** ```markdown # Hebrew Text Library ## Common Buttons - ◊©◊û◊ï◊® (Save) - ◊ë◊ô◊ò◊ï◊ú (Cancel) - ◊ê◊ô◊©◊ï◊® (Confirm) - ◊û◊ó◊ß (Delete) [... full list from previous memory bank] ## Form Labels [... full list] ## Error Messages [... full list] ## Success Messages [... full list] ``` ### extras/apiEndpoints.md **API documentation** ```markdown # API Endpoints ## Base URL - Development: http://localhost:3000/api - Staging: https://staging-api.tiktax.co.il - Production: https://api.tiktax.co.il ## Authentication ### POST /auth/signup ### POST /auth/login [... detailed endpoint docs] ## Receipts ### POST /receipts/process ### GET /receipts [... detailed endpoint docs] ``` ### extras/securityRules.md **Security requirements and patterns** ```markdown # Security Rules ## CRITICAL RULES (Never Break) 1. ‚ùå NEVER store auth tokens in localStorage 2. ‚úÖ ALWAYS validate user input (client + server) 3. ‚úÖ ALWAYS sanitize data before display [... full security checklist] ``` ### extras/designSystem.md **Design tokens and patterns** ```markdown # Design System ## Colors Primary: #2563eb [... full color system] ## Typography [... font scales] ## Spacing [... spacing system] ## Components [... component specs] ``` --- ## CORE WORKFLOWS ### Plan Mode (Before Starting Work) ``` 1. Read projectbrief.md (understand foundation) 2. Read productContext.md (understand why) 3. Read systemPatterns.md (understand architecture) 4. Read techContext.md (understand tools) 5. Read activeContext.md (understand current focus) 6. Read progress.md (understand status) 7. Check if files are complete 8. If incomplete ‚Üí Create plan and document 9. If complete ‚Üí Develop strategy and present ``` ### Act Mode (During Development) ``` 1. Check activeContext.md (what's current?) 2. Execute task 3. Update progress.md (mark completed) 4. Update activeContext.md (note changes) 5. Document any new patterns in systemPatterns.md 6. Note any blockers in activeContext.md ``` ### Update Memory Bank (User Request) ``` When user says "update memory bank": 1. MUST review ALL memory bank files 2. Update activeContext.md (current focus) 3. Update progress.md (status) 4. Update systemPatterns.md (if patterns changed) 5. Update techContext.md (if tools changed) 6. Create/update extras/ files as needed 7. Document insights and learnings ``` --- ## MEMORY BANK MAINTENANCE RULES ### When to Update Each File: | File | Update Frequency | Triggers | |------|-----------------|----------| | projectbrief.md | Rarely | Project scope changes | | productContext.md | Monthly | New features, user feedback | | systemPatterns.md | Weekly | Architecture changes, new patterns | | techContext.md | As needed | New dependencies, tool changes | | activeContext.md | Daily | Every work session | | progress.md | Daily | Task completion, new issues | ### Update Checklist: Before ending work session: - [ ] Updated activeContext.md with current focus - [ ] Updated progress.md with completed tasks - [ ] Documented any new patterns - [ ] Noted any blockers or questions - [ ] Marked tasks as complete/in-progress After major milestone: - [ ] Reviewed all core files - [ ] Updated architecture docs - [ ] Documented decisions - [ ] Updated status and metrics --- ## CRITICAL REMINDERS ### For GitHub Copilot: ``` ‚ö†Ô∏è MEMORY RESETS BETWEEN SESSIONS ‚ö†Ô∏è MUST READ ALL FILES AT START ‚ö†Ô∏è MEMORY BANK IS YOUR ONLY LINK TO PAST WORK ‚ö†Ô∏è MAINTAIN WITH PRECISION - EFFECTIVENESS DEPENDS ON IT ``` ### For Developer: ``` ‚úÖ Keep memory bank updated regularly ‚úÖ Document decisions as they happen ‚úÖ Use "update memory bank" command when needed ‚úÖ Add new patterns as you discover them ‚úÖ Review weekly for accuracy ``` --- ## GETTING STARTED ### Initial Setup (First Time): 1. **Create Memory Bank Folder:**    ```bash    mkdir memory-bank    mkdir memory-bank/extras    ``` 2. **Create Core Files:**    ```bash    touch memory-bank/1-projectbrief.md    touch memory-bank/2-productContext.md    touch memory-bank/3-systemPatterns.md    touch memory-bank/4-techContext.md    touch memory-bank/5-activeContext.md    touch memory-bank/6-progress.md    ``` 3. **Populate with Tik-Tax Context:**    - Copy content from the detailed specifications    - Fill in current status    - Document initial decisions 4. **Create Extras:**    ```bash    touch memory-bank/extras/hebrewTexts.md    touch memory-bank/extras/apiEndpoints.md    touch memory-bank/extras/securityRules.md    touch memory-bank/extras/designSystem.md    ``` ### Daily Usage: 1. **Start of Session:**    - Open activeContext.md    - Review today's focus    - Read any notes from last session 2. **During Work:**    - Execute tasks    - Document as you go    - Note any learnings 3. **End of Session:**    - Update progress.md    - Update activeContext.md    - Commit changes to git 4. **When Copilot Helps:**    - Say "Check memory bank for context"    - Say "Update memory bank" after major work    - Reference specific files: "Check systemPatterns.md" --- ## EXAMPLE PROMPTS FOR COPILOT ### Good Prompts: ``` "Check memory bank, then create the login page following our patterns" "Review systemPatterns.md and implement the receipt upload flow" "Update memory bank with the new authentication approach" "Following activeContext.md, continue work on the dashboard" ``` ### Bad Prompts: ``` "Create a button" (no context) "Make login page" (missing patterns/requirements) "Build the app" (too vague) ``` --- ## FILE TEMPLATES Ready-to-use templates for each file are provided in the next sections... --- **END OF MEMORY BANK STRUCTURE** This system ensures GitHub Copilot always has full project context, even after memory resets. Maintain it religiously for best results! üöÄ