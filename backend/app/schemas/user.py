"""\nUser Pydantic Schemas\n"""\n\nfrom datetime import datetime\nfrom typing import Optional\nfrom pydantic import BaseModel, EmailStr, Field, validator\nfrom app.utils.validators import validate_israeli_phone\n\n\nclass UserBase(BaseModel):\n    """Base user schema"""\n    email: EmailStr\n    first_name: str\n    last_name: str\n    phone: str\n    business_name: Optional[str] = None\n    business_id: Optional[str] = None\n\n\nclass UserResponse(UserBase):\n    """User response schema"""\n    id: str\n    is_active: bool\n    is_verified: bool\n    created_at: datetime\n    last_login: Optional[datetime] = None\n    \n    class Config:\n        from_attributes = True\n\n\nclass UserUpdate(BaseModel):\n    """User update schema"""\n    first_name: Optional[str] = None\n    last_name: Optional[str] = None\n    phone: Optional[str] = None\n    business_name: Optional[str] = None\n    business_id: Optional[str] = None\n\n\nclass SubscriptionResponse(BaseModel):\n    """Subscription response schema"""\n    id: str\n    plan_type: str\n    price: float\n    is_active: bool\n    status: str\n    current_period_start: Optional[datetime] = None\n    current_period_end: Optional[datetime] = None\n    \n    class Config:\n        from_attributes = True\n\n\n# ============================================================================\n# User Profile Management Schemas\n# ============================================================================\n\nclass UserProfileUpdate(BaseModel):\n    """Schema for updating user profile"""\n    full_name: Optional[str] = Field(None, min_length=2, max_length=100)\n    business_name: Optional[str] = Field(None, min_length=2, max_length=200)\n    business_number: Optional[str] = Field(None, min_length=8, max_length=9)\n    phone: Optional[str] = None\n    \n    @validator('phone')\n    def validate_phone(cls, v):\n        if v and not validate_israeli_phone(v):\n            raise ValueError('מספר טלפון לא תקין')\n        return v\n\n\nclass EmailChangeRequest(BaseModel):\n    """Schema for email change request"""\n    new_email: EmailStr\n    password: str = Field(..., min_length=8)\n\n\nclass EmailChangeVerify(BaseModel):\n    """Schema for email change verification"""\n    token: str = Field(..., min_length=6, max_length=6)\n\n\nclass PhoneChangeRequest(BaseModel):\n    """Schema for phone change request"""\n    new_phone: str\n    \n    @validator('new_phone')\n    def validate_phone(cls, v):\n        if not validate_israeli_phone(v):\n            raise ValueError('מספר טלפון לא תקין')\n        return v\n\n\nclass AccountDeleteRequest(BaseModel):\n    """Schema for account deletion"""\n    password: str = Field(..., min_length=8)\n    confirmation: str = Field(..., pattern='^DELETE$')\n\n\nclass UserUsageStats(BaseModel):\n    """Schema for user usage statistics"""\n    receipts_this_month: int\n    monthly_receipt_limit: int\n    usage_percentage: float\n    receipts_this_year: int\n    total_amount_this_month: float\n    total_amount_this_year: float\n    storage_used_mb: float\n\n\nclass UserProfileResponse(BaseModel):\n    """Schema for user profile response"""\n    id: int\n    email: str\n    full_name: str\n    id_number: str\n    phone: str\n    phone_verified: bool\n    business_name: str\n    business_number: str\n    subscription_plan: str\n    monthly_receipt_limit: int\n    receipts_this_month: int\n    created_at: str\n    \n    class Config:\n        from_attributes = True